<turbo-frame id="forecast_frame">
  <% if local_assigns[:error].present? %>
    <div class="error-message">
      <p style="color:red;"><%= local_assigns[:error] %></p>
    </div>
  <% elsif forecast.blank? %>
    <div class="no-data-message">
      <p style="color:gray;">No forecast available for this location.</p>
    </div>
  <% else %>
    <div class="weather-result">
      <div class="location-info">
        <p><strong>Location:</strong> <%= place %> (<%= zip %>)</p>

        <span style="background:<%= from_cache ? '#e6f7ff' : '#eaffea' %>;padding:4px 8px;border-radius:4px;">
          <%= from_cache ? 'Cached âœ…' : 'Fresh ðŸŒŸ' %>
        </span>
      </div>

      <div class="current-weather">
        <h3>Current: <%= forecast[:current][:temp] %>Â°C</h3>
        <p>Feels like: <%= forecast[:current][:feels_like] %>Â°C</p>
      </div>

      <div class="today-forecast">
        <h4>Today</h4>
        <p>High: <%= forecast[:today][:high] %>Â°C | Low: <%= forecast[:today][:low] %>Â°C</p>
      </div>

      <div class="extended-forecast">
        <h4>Next 3 Days</h4>
        <ul>
          <% forecast[:next_days].each do |day| %>
            <li>
              <%= day[:date].strftime("%a") %>
              â€” <%= day[:high] %>Â° / <%= day[:low] %>Â°
              (<%= day[:summary] %>)
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>
</turbo-frame>
